var j=Object.defineProperty;var Y=(t,e,s)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var h=(t,e,s)=>(Y(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();class c{constructor(e,s,r){h(this,"pos");h(this,"vel");h(this,"mass");this.pos=e,this.vel=s,this.mass=r}applyForce(e,s){const r=e.div(this.mass);this.vel=this.vel.add(r.mul(s)),this.pos=this.pos.add(this.vel.mul(s))}}class o{constructor(e,s){this.x=e,this.y=s}add(e){return new o(this.x+e.x,this.y+e.y)}sub(e){return new o(this.x-e.x,this.y-e.y)}mul(e){return new o(this.x*e,this.y*e)}div(e){return new o(this.x/e,this.y/e)}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}norm(){const e=this.mag();return e===0?new o(0,0):this.div(e)}}class A{constructor(e,s){h(this,"bodies");h(this,"G");this.bodies=e,this.G=s}calcForce(e,s){const r=s.pos.sub(e.pos),n=r.mag(),l=this.G*e.mass*s.mass/n**2;return r.norm().mul(l)}step(e){for(let s=0;s<this.bodies.length;s++){const r=this.bodies[s];let n=new o(0,0);for(let l=0;l<this.bodies.length;l++)if(s!==l){const d=this.bodies[l];n=n.add(this.calcForce(r,d))}r.applyForce(n,e)}}}function O(t,e,s,r){const n=window.devicePixelRatio;t.width=s*n,t.height=r*n,t.style.width=`${s}px`,t.style.height=`${r}px`,e(n)}let w=window.innerWidth,f=window.innerHeight,y=1e-9,g=new o(0,0);function X(t,e,s){t.save(),t.translate(w/2,f/2);const r=e.pos.sub(g);t.beginPath(),t.arc(r.x*y,r.y*y,e.radius,0,2*Math.PI),s.fillStyle&&(t.fillStyle=s.fillStyle,t.fill()),s.strokeStyle&&(t.strokeStyle=s.strokeStyle,s.lineWidth&&(t.lineWidth=s.lineWidth),t.stroke()),t.restore()}function q(t,e){t.save(),t.fillStyle=e,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore()}function x(t,e){for(const s of e)s.title,X(t,{pos:s.body.pos,radius:s.radius},{fillStyle:s.color,strokeStyle:"white",lineWidth:1})}const b=[{body:new c(new o(0,0),new o(0,0),1.989*10**30),radius:20,color:"yellow"},{body:new c(new o(5.79*10**10,0),new o(0,47870),3.285*10**23),radius:2,color:"gray"},{body:new c(new o(1.082*10**11,0),new o(0,35020),4.867*10**24),radius:3,color:"orange"},{body:new c(new o(1.496*10**11,0),new o(0,29783),5.972*10**24),radius:5,color:"blue"},{body:new c(new o(1.496*10**11+3.84*10**8,0),new o(0,29783+1022),7.34767309*10**22),radius:1,color:"gray"},{title:"Mars",body:new c(new o(2.279*10**11,0),new o(0,24077),6.39*10**23),radius:3,color:"red"},{body:new c(new o(2.279*10**11+9.375*10**6,0),new o(0,24077+2138),1.0659*10**16),radius:1,color:"gray"},{body:new c(new o(2.279*10**11+2.326*10**7,0),new o(0,24077+1351),1.4762*10**15),radius:1,color:"gray"},{body:new c(new o(7.785*10**11,0),new o(0,13070),1.898*10**27),radius:10,color:"brown"},{body:new c(new o(1.433*10**12,0),new o(0,9690),5.683*10**26),radius:8,color:"yellow"},{body:new c(new o(2.873*10**12,0),new o(0,6810),8.681*10**25),radius:6,color:"lightblue"},{body:new c(new o(4.495*10**12,0),new o(0,5430),1.024*10**26),radius:6,color:"blue"}],G=6.6743*10**-11;function T(t){window.addEventListener("resize",()=>{w=window.innerWidth,f=window.innerHeight,O(t,i=>e.scale(i,i),w,f)});const e=t.getContext("2d");O(t,i=>e.scale(i,i),w,f);const s=new A(b.map(i=>i.body),G);let r=b[0].body,n=1,l=1800,d=0;function E(){const i=Math.floor(d/86400),a=Math.floor(d%86400/3600);e.fillStyle="white",e.font="12px monospace",e.fillText(`Passed time: ${i} days ${a} hours`,20,20)}function v(){for(let i=0;i<l;i++)s.step(n);d+=n*l,g=r.pos,q(e,"#1b2b34"),x(e,b),E(),requestAnimationFrame(v)}v(),t.addEventListener("wheel",i=>{i.preventDefault(),y*=1+i.deltaY/1e3});let m=0;t.addEventListener("touchstart",i=>{if(i.touches.length===2){const[a,u]=Array.from(i.touches);m=new o(a.clientX,a.clientY).sub(new o(u.clientX,u.clientY)).mag()}}),t.addEventListener("touchmove",i=>{if(i.touches.length===2){const[a,u]=Array.from(i.touches),p=new o(a.clientX,a.clientY).sub(new o(u.clientX,u.clientY)).mag();y*=1+(p-m)/100,m=p}}),t.addEventListener("click",i=>{const a=i.offsetX,u=i.offsetY,p=new o(a,u),F=new o(w/2,f/2),W=p.sub(F).div(y).add(g),S=b.reduce((P,L)=>{const M=L.body.pos.sub(W).mag();return M<P.dist?{dist:M,obj:L}:P},{dist:1/0,obj:null});S.obj&&(r=S.obj.body)})}const C=document.createElement("canvas");document.querySelector("#app").appendChild(C);T(C);
